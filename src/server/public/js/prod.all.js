var API_GET="http://localhost:5000/colors",bgImg=document.querySelector("#imgc");bgImg.parentElement.hidden=!0;var img=new Image;img.onload=function(e){console.log(e),console.log(img.naturalWidth,img.naturalHeight),bgImg.style.width=""+img.naturalWidth,bgImg.style.height=""+img.naturalHeight,bgImg.parentElement.hidden=!1},img.src="/image/infile.jpg",fetch(API_GET+"/infile.jpg",{method:"GET",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){console.log(e);var t=e.main,o=e.palette;console.log(t,o);var n=document.querySelector(":root");n.style.setProperty("--bg-color","rgb("+t[0]+","+t[1]+","+t[2]+")"),o.forEach(function(e,t){n.style.setProperty("--color-"+t,"rgb("+e[0]+","+e[1]+","+e[2]+")")});var l=document.createElement("link");l.rel="stylesheet",l.href="/colorcss/infile.jpg/style.css",document.head.appendChild(l)});